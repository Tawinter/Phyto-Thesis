View(cmlnut)
View(hamptonNut)
#Join summary dataframes together
cmlnut <- inner_join(cml_a_s, cml_lpn_s, by = c('fct_inorder(MY)'))
cmlnut <- inner_join(cmlnut, cml_spn_s, by = c('fct_inorder(MY)'))
hamptonNut <- inner_join(hampton_a_s, hampton_lpn_s, by = c('fct_inorder(MY)'))
hamptonNut <- inner_join(hamptonNut, hampton_spn_s, by = c('fct_inorder(MY)'))
#Rename columns
colnames(hamptonNut)<- c("fct_inorder(MY)", "Alex(Sum)", "Large_PN(Sum)", "Small_PN(Sum)")
colnames(cmlnut)<- c("fct_inorder(MY)", "Alex(Sum)", "Large_PN(Sum)", "Small_PN(Sum)")
#Read in new csv files and nutrient data
cmlnut <- read.csv("CML_Nut.csv" , stringsAsFactors = TRUE)
hamptonNut <- read.csv("Hampton_Nut.csv", stringsAsFactors = TRUE)
View(cmlnut)
View(hamptonNut)
#Read in new csv files and nutrient data
cmlnut <- read.csv("CML_Nut.csv" , stringsAsFactors = TRUE)
cml_chla <- read.csv("./PREP/cml_chla.csv", stringsAsFactors = TRUE)
View(cml_chla)
View(cmlnut)
cml_chla <- read.csv("./PREP/cml_chla.csv", stringsAsFactors = TRUE)
cml_ni <- read.csv("./PREP/cml_nitrate_nitrite.csv", stringsAsFactors = TRUE)
#Read in new csv files and nutrient data
cmlnut <- read.csv("CML_Nut.csv" , stringsAsFactors = TRUE)
cml_chla <- read.csv("./PREP/cml_chla.csv", stringsAsFactors = TRUE)
cml_n <- read.csv("./PREP/cml_nitrate_nitrite.csv", stringsAsFactors = TRUE)
#Read in new csv files and nutrient data
cmlnut <- read.csv("CML_Nut.csv" , stringsAsFactors = TRUE)
cml_chla <- read.csv("./PREP/cml_chla.csv", stringsAsFactors = TRUE)
cml_n <- read.csv("./PREP/cml_nitrate_nitrite.csv", stringsAsFactors = TRUE)
cml_p <- read.csv("./PREP/cml_phosphorus.csv", stringsAsFactors = TRUE)
cml_sal <- read.csv("./PREP/cml_salinity.csv", stringsAsFactors = TRUE)
cml_si <- read.csv("./PREP/cml_silica.csv", stringsAsFactors = TRUE)
cml_temp <- read.csv("./PREP/cml_temp.csv", stringsAsFactors = TRUE)
cml_tss <- read.csv("./PREP/cml_tss.csv", stringsAsFactors = TRUE)
ulb_chla <- read.csv("./PREP/grbulb_chla.csv", stringsAsFactors = TRUE)
ulb_n <- read.csv("./PREP/grbulb_Nitrate_Nitrite.csv", stringsAsFactors = TRUE)
ulb_p <- read.csv("./PREP/grbulb_phosphorus.csv", stringsAsFactors = TRUE)
ulb_sal <- read.csv("./PREP/grbulb_salinity.csv", stringsAsFactors = TRUE)
ulb_temp <- read.csv("./PREP/grbulb_temp.csv", stringsAsFactors = TRUE)
View(cml_chla)
#Create new dataframe pulling out only wanted years
cfill_chla <- cml_chla %>% filter(year >= 7)
View(cfill_chla)
library(tidyverse)
install.packages("tidyverse")
library(tidyverse)
library(dplyr)
library(tidyr)
library(formattable)
library(forcats)
#Create new dataframe pulling out only wanted years
cfill_chla <- cml_chla %>% filter(year >= 7)
View(cfill_chla)
#Create new dataframe pulling out only wanted years
cfill_chla <- cml_chla %>% filter(year >= 2017)
cfill_n <- cml_n %>% filter(year >= 2017)
View(cml_n)
View(cfill_n)
View(cml_p)
cfill_p <- cml_p %>% filter(year >= 2017)
View(cml_sal)
cfill_sal <- cml_sal %>% filter(year >= 2017)
View(cml_si)
View(cml_chla)
View(cml_n)
View(cml_p)
View(cml_sal)
View(cml_si)
View(cml_temp)
View(cml_tss)
View(ulb_chla)
View(ulb_chla)
View(ulb_n)
View(ulb_sal)
View(ulb_temp)
#Create new dataframe pulling out only wanted years
cfill_chla <- cml_chla %>% filter(year >= 2017)
cfill_n <- cml_n %>% filter(year >= 2017)
cfill_p <- cml_p %>% filter(year >= 2017)
cfill_sal <- cml_sal %>% filter(year >= 2017)
cfill_si <- cml_si %>% filter(year >= 2017)
cfill_temp <- cml_temp %>% filter(year >= 2017)
cfill_tss <- cml_tss %>% filter(year >= 2017)
cfill_sal <- cml_sal %>% filter(Year >= 2017)
cfill_temp <- cml_temp %>% filter(Year >= 2017)
#Create new dataframe pulling out only wanted years
cfil_chla <- cml_chla %>% filter(year >= 2017)
cfil_n <- cml_n %>% filter(year >= 2017)
cfil_p <- cml_p %>% filter(year >= 2017)
#Read in new csv files and nutrient data
cmlnut <- read.csv("CML_Nut.csv" , stringsAsFactors = TRUE)
cml_chla <- read.csv("./PREP/cml_chla.csv", stringsAsFactors = TRUE)
cml_n <- read.csv("./PREP/cml_nitrate_nitrite.csv", stringsAsFactors = TRUE)
cml_p <- read.csv("./PREP/cml_phosphorus.csv", stringsAsFactors = TRUE)
cml_sal <- read.csv("./PREP/cml_salinity.csv", stringsAsFactors = TRUE)
cml_si <- read.csv("./PREP/cml_silica.csv", stringsAsFactors = TRUE)
cml_temp <- read.csv("./PREP/cml_temp.csv", stringsAsFactors = TRUE)
cml_tss <- read.csv("./PREP/cml_tss.csv", stringsAsFactors = TRUE)
ulb_chla <- read.csv("./PREP/grbulb_chla.csv", stringsAsFactors = TRUE)
ulb_n <- read.csv("./PREP/grbulb_Nitrate_Nitrite.csv", stringsAsFactors = TRUE)
ulb_p <- read.csv("./PREP/grbulb_phosphorus.csv", stringsAsFactors = TRUE)
ulb_sal <- read.csv("./PREP/grbulb_salinity.csv", stringsAsFactors = TRUE)
ulb_temp <- read.csv("./PREP/grbulb_temp.csv", stringsAsFactors = TRUE)
#Create new dataframe pulling out only wanted years
cfil_chla <- cml_chla %>% filter(year >= 2017)
cfil_n <- cml_n %>% filter(year >= 2017)
cfil_p <- cml_p %>% filter(year >= 2017)
cfil_sal <- cml_sal %>% filter(Year >= 2017)
cfil_si <- cml_si %>% filter(year >= 2017)
cfil_temp <- cml_temp %>% filter(Year >= 2017)
cfil_tss <- cml_tss %>% filter(year >= 2017)
View(cfil_chla)
#Create new dataframe keeping only wanted columns
cfil_chla <- cfil_chla[ , c("Month", "datavalue", "year")]
View(cfil_chla)
#Create new dataframe keeping only wanted columns
cfil_chla <- cfil_chla[ , c("Month", "datavalue", "year")]
cfil_n <- cfil_n[ , c("Month", "datavalue", "year")]
cfil_p <- cfil_p[ , c("Month", "datavalue", "year")]
cfil_sal <- cfil_sal[ , c("Month", "datavalue", "year")]
cfil_si <- cfil_si[ , c("Month", "datavalue", "year")]
cfil_temp <- cfil_temp[ , c("Month", "datavalue", "year")]
cfil_sal <- cfil_sal[ , c("Month", "datavalue", "Year")]
cfil_temp <- cfil_temp[ , c("Month", "datavalue", "Year")]
cfil_tss <- cfil_tss[ , c("Month", "datavalue", "year")]
ufil_chla <- ulb_chla[ , c("Month", "datavalue", "year")]
ufil_chla <- ulb_chla[ , c("Month", "datavalue", "Year")]
ufil_chla <- ulb_chla[ , c("Month", "datavalue", "Year")]
View(ulb_chla)
ufil_chla <- ulb_chla[ , c("Month", "datavalue", "Year")]
ufil_n <- ulb_n[ , c("Month", "datavalue", "Year")]
ufil_p <- ulb_p[ , c("Month", "datavalue", "Year")]
ufil_sal <- ulb_sal[ , c("Month", "datavalue", "Year")]
ufil_temp <- ulb_temp[ , c("Month", "datavalue", "Year")]
View(ufil_temp)
View(cfil_chla)
View(ufil_chla)
#Convert month number to month 3 letter abbreviation
mymonths <- c("Jan","Feb","Mar",
"Apr","May","Jun",
"Jul","Aug","Sep",
"Oct","Nov","Dec")
#Insert month abv. for month number
cfil_chla$MoAb <- mymonths[ cfil_chla$Month ]
View(cfil_chla)
#Insert month abv. for month number
cfil_chla$MoAb <- mymonths[ cfil_chla$Month ]
cfil_n$MoAb <- mymonths[ cfil_n$Month ]
cfil_p$MoAb <- mymonths[ cfil_p$Month ]
cfil_sal$MoAb <- mymonths[ cfil_sal$Month ]
cfil_si$MoAb <- mymonths[ cfil_si$Month ]
cfil_temp$MoAb <- mymonths[ cfil_temp$Month ]
cfil_tss$MoAb <- mymonths[ cfil_tss$Month ]
ufil_chla$MoAb <- mymonths[ ufil_chla$Month ]
ufil_n$MoAb <- mymonths[ ufil_n$Month ]
ufil_p$MoAb <- mymonths[ ufil_p$Month ]
ufil_sal$MoAb <- mymonths[ ufil_sal$Month ]
ufil_temp$MoAb <- mymonths[ ufil_temp$Month ]
#Concentrate month abv. and year with "-"
cfil_chla$MY <- paste(cfil_chla$MoAb, "-", cfil_chla$year)
#Concentrate month abv. and year with "-"
cfil_chla$MY <- paste(cfil_chla$MoAb, "-", cfil_chla$year)
cfil_n$MY <- paste(cfil_n$MoAb, "-", cfil_n$year)
cfil_p$MY <- paste(cfil_p$MoAb, "-", cfil_p$year)
cfil_sal$MY <- paste(cfil_sal$MoAb, "-", cfil_sal$year)
cfil_si$MY <- paste(cfil_si$MoAb, "-", cfil_si$year)
cfil_temp$MY <- paste(cfil_temp$MoAb, "-", cfil_temp$year)
cfil_tss$MY <- paste(cfil_tss$MoAb, "-", cfil_tss$year)
ufil_chla$MY <- paste(ufil_chla$MoAb, "-", ufil_chla$year)
ufil_n$MY <- paste(ufil_n$MoAb, "-", ufil_n$year)
ufil_p$MY <- paste(ufil_p$MoAb, "-", ufil_p$year)
ufil_sal$MY <- paste(ufil_sal$MoAb, "-", ufil_sal$year)
ufil_temp$MY <- paste(ufil_temp$MoAb, "-", ufil_temp$year)
#Combining chlorophyll a dataframes
cavg_chla <- cfil_chla %>%
group_by(fct_inorder(MY)) %>%
summarize_at(c("datavalue"), mean, na.rm = TRUE)
View(cavg_chla)
uavg_chla <- ufil_chla %>%
group_by(fct_inorder(MY)) %>%
summarize_at(c("datavalue"), mean, na.rm = TRUE)
View(uavg_chla)
View(ufil_chla)
cfil_sal$MY <- paste(cfil_sal$MoAb, "-", cfil_sal$Year)
cfil_temp$MY <- paste(cfil_temp$MoAb, "-", cfil_temp$Year)
ufil_chla$MY <- paste(ufil_chla$MoAb, "-", ufil_chla$Year)
ufil_n$MY <- paste(ufil_n$MoAb, "-", ufil_n$Year)
ufil_p$MY <- paste(ufil_p$MoAb, "-", ufil_p$Year)
ufil_sal$MY <- paste(ufil_sal$MoAb, "-", ufil_sal$Year)
ufil_temp$MY <- paste(ufil_temp$MoAb, "-", ufil_temp$Year)
uavg_chla <- ufil_chla %>%
group_by(fct_inorder(MY)) %>%
summarize_at(c("datavalue"), mean, na.rm = TRUE)
chla <- inner_join(cavg_chla, uavg_chla, by = c('fct_inorder(MY)'))
View(chla)
chla <- merge(cavg_chla,uavg_chla,by="fct_inorder(MY)")
chla <- inner_join(cavg_chla, uavg_chla, by = 0)
chla <- merge(cavg_chla,uavg_chla,by=0)
View(chla)
chla <- cbind(cavg_chla,uavg_chla)
chla <- inner_join(cfil_chla, ufil_chla, by = c('fct_inorder(MY)'))
View(cfil_chla)
chla <- inner_join(cavg_chla, uavg_chla, by = c('fct_inorder(MY)'))
View(chla)
colnames(cavg_chla)<- c("fct_inorder(MY)", "chla", "Month")
colnames(cavg_chla)<- c("fct_inorder(MY)", "chla")
colnames(uavg_chla)<- c("fct_inorder(MY)", "chla")
chla <- inner_join(cavg_chla, uavg_chla, by = c('fct_inorder(MY)'))
View(cfil_tss)
View(chla)
chla <- merge(cavg_chla, uavg_chla, by = "fct_inorder(MY)", all.x = TRUE)
chla <- full_join(cavg_chla, uavg_chla, by = c('fct_inorder(MY)'))
View(chla)
chla$chla <- paste(cavg_chla$chla.x, cavg_chla$chla.y)
chla$chla <- paste(chla$chla.x, chla$chla.y)
chla <- full_join(cavg_chla, uavg_chla, by = c('fct_inorder(MY)'))
chla[chla == "NA"] <- "0"
chla %>% mutate(chla = coalesce(chla.x,chla.y)) %>%
select(`fct_inorder(MY)`, chla)
chla <- chla %>% mutate(chla = coalesce(chla.x,chla.y)) %>%
select(`fct_inorder(MY)`, chla)
View(cfil_n)
View(ufil_n)
#Combining nitrogen dataframes
cavg_n <- cfil_n %>%
group_by(fct_inorder(MY)) %>%
summarize_at(c("datavalue"), mean, na.rm = TRUE)
uavg_n <- ufil_n %>%
group_by(fct_inorder(MY)) %>%
summarize_at(c("datavalue"), mean, na.rm = TRUE)
View(uavg_n)
View(cavg_n)
colnames(cavg_n)<- c("fct_inorder(MY)", "Nitrogen")
colnames(uavg_n)<- c("fct_inorder(MY)", "Nitrogen")
nitrogen <- full_join(cavg_n, uavg_n, by = c('fct_inorder(MY)'))
View(nitrogen)
colnames(cavg_n)<- c("fct_inorder(MY)", "nitrogen")
colnames(uavg_n)<- c("fct_inorder(MY)", "nitrogen")
nitrogen <- full_join(cavg_n, uavg_n, by = c('fct_inorder(MY)'))
nitrogen <- nitrogen %>% mutate(nitrogen = coalesce(nitrogen.x,nitrogen.y)) %>%
select(`fct_inorder(MY)`, nitrogen)
View(ufil_p)
#Combining phosphorus dataframes
cavg_p <- cfil_p %>%
group_by(fct_inorder(MY)) %>%
summarize_at(c("datavalue"), mean, na.rm = TRUE)
View(cavg_p)
uavg_p <- ufil_p %>%
group_by(fct_inorder(MY)) %>%
summarize_at(c("datavalue"), mean, na.rm = TRUE)
View(uavg_p)
colnames(cavg_p)<- c("fct_inorder(MY)", "phosphorus")
colnames(uavg_p)<- c("fct_inorder(MY)", "phosphorus")
phosphorus <- full_join(cavg_p, uavg_p, by = c('fct_inorder(MY)'))
View(phosphorus)
phosphorus <- phosphorus %>% mutate(phosphorus = coalesce(phosphorus.x,phosphorus.y)) %>%
select(`fct_inorder(MY)`, phosphorus)
#Combining salinity dataframes
cavg_sal <- cfil_sal %>%
group_by(fct_inorder(MY)) %>%
summarize_at(c("datavalue"), mean, na.rm = TRUE)
View(cavg_sal)
uavg_sal <- ufil_sal %>%
group_by(fct_inorder(MY)) %>%
summarize_at(c("datavalue"), mean, na.rm = TRUE)
View(uavg_sal)
colnames(cavg_p)<- c("fct_inorder(MY)", "salinity")
colnames(uavg_p)<- c("fct_inorder(MY)", "salinity")
colnames(cavg_p)<- c("fct_inorder(MY)", "phosphorus")
colnames(uavg_p)<- c("fct_inorder(MY)", "phosphorus")
colnames(cavg_sal)<- c("fct_inorder(MY)", "salinity")
colnames(uavg_sal)<- c("fct_inorder(MY)", "salinity")
salinity <- full_join(cavg_sal, uavg_sal, by = c('fct_inorder(MY)'))
View(salinity)
salinity <- salinity %>% mutate(salinity = coalesce(salinity.x,salinity.y)) %>%
select(`fct_inorder(MY)`, salinity)
#Combining temperature dataframes
cavg_temp <- cfil_temp %>%
group_by(fct_inorder(MY)) %>%
summarize_at(c("datavalue"), mean, na.rm = TRUE)
View(cavg_temp)
uavg_temp <- ufil_temp %>%
group_by(fct_inorder(MY)) %>%
summarize_at(c("datavalue"), mean, na.rm = TRUE)
View(uavg_temp)
colnames(cavg_temp)<- c("fct_inorder(MY)", "temperature")
colnames(uavg_temp)<- c("fct_inorder(MY)", "temperature")
temperature <- full_join(cavg_temp, uavg_temp, by = c('fct_inorder(MY)'))
View(temperature)
temperature <- temperature %>% mutate(temperature = coalesce(temperature.x,temperature.y)) %>%
select(`fct_inorder(MY)`, temperature)
#Read in new csv files and nutrient data
cmlnut <- read.csv("CML_Nut.csv" , stringsAsFactors = TRUE)
View(cfil_si)
#averaging silica and tss
silica <- cfil_si %>%
group_by(fct_inorder(MY)) %>%
summarize_at(c("datavalue"), mean, na.rm = TRUE)
View(silica)
colnames(cavg_temp)<- c("fct_inorder(MY)", "silica")
colnames(cavg_temp)<- c("fct_inorder(MY)", "temperature")
colnames(silica)<- c("fct_inorder(MY)", "silica")
tss <- cfil_tss %>%
group_by(fct_inorder(MY)) %>%
summarize_at(c("datavalue"), mean, na.rm = TRUE)
View(tss)
colnames(tss)<- c("fct_inorder(MY)", "tss")
View(cmlnut)
#combine nutrients dataframes with master dataframe
cmlnut <- inner_join(cmlnut, chla, by = c('fct_inorder(MY)'))
View(chla)
colnames(cavg_chla)<- c("fct_inorder.MY.", "chla")
colnames(uavg_chla)<- c("fct_inorder.MY.", "chla")
chla <- full_join(cavg_chla, uavg_chla, by = c('fct_inorder.MY.'))
chla <- chla %>% mutate(chla = coalesce(chla.x,chla.y)) %>%
select(`fct_inorder.MY.`, chla)
#combine nutrients dataframes with master dataframe
cmlnut <- inner_join(cmlnut, chla, by = c('fct_inorder.MY.'))
#combine nutrients dataframes with master dataframe
cmlnut <- full_join(cmlnut, chla, by = c('fct_inorder.MY.'))
View(cmlnut)
View(cmlnut)
View(cmlnut)
#Write csv files
write.csv(cmlnut,'CML_Nut.csv', row.names = FALSE)
write.csv(hamptonNut,'Hampton_Nut.csv', row.names = FALSE)
#Read in new csv files and nutrient data
cmlnut <- read.csv("CML_Nut.csv" , stringsAsFactors = TRUE)
cml_chla <- read.csv("./PREP/cml_chla.csv", stringsAsFactors = TRUE)
cml_n <- read.csv("./PREP/cml_nitrate_nitrite.csv", stringsAsFactors = TRUE)
cml_p <- read.csv("./PREP/cml_phosphorus.csv", stringsAsFactors = TRUE)
cml_sal <- read.csv("./PREP/cml_salinity.csv", stringsAsFactors = TRUE)
cml_si <- read.csv("./PREP/cml_silica.csv", stringsAsFactors = TRUE)
cml_temp <- read.csv("./PREP/cml_temp.csv", stringsAsFactors = TRUE)
cml_tss <- read.csv("./PREP/cml_tss.csv", stringsAsFactors = TRUE)
ulb_chla <- read.csv("./PREP/grbulb_chla.csv", stringsAsFactors = TRUE)
ulb_n <- read.csv("./PREP/grbulb_Nitrate_Nitrite.csv", stringsAsFactors = TRUE)
ulb_p <- read.csv("./PREP/grbulb_phosphorus.csv", stringsAsFactors = TRUE)
ulb_sal <- read.csv("./PREP/grbulb_salinity.csv", stringsAsFactors = TRUE)
ulb_temp <- read.csv("./PREP/grbulb_temp.csv", stringsAsFactors = TRUE)
#Create new dataframe pulling out only wanted years
cfil_chla <- cml_chla %>% filter(year >= 2017)
cfil_n <- cml_n %>% filter(year >= 2017)
cfil_p <- cml_p %>% filter(year >= 2017)
cfil_sal <- cml_sal %>% filter(Year >= 2017)
cfil_si <- cml_si %>% filter(year >= 2017)
cfil_temp <- cml_temp %>% filter(Year >= 2017)
cfil_tss <- cml_tss %>% filter(year >= 2017)
#Create new dataframe keeping only wanted columns
cfil_chla <- cfil_chla[ , c("Month", "datavalue", "year")]
cfil_n <- cfil_n[ , c("Month", "datavalue", "year")]
cfil_p <- cfil_p[ , c("Month", "datavalue", "year")]
cfil_sal <- cfil_sal[ , c("Month", "datavalue", "Year")]
cfil_si <- cfil_si[ , c("Month", "datavalue", "year")]
cfil_temp <- cfil_temp[ , c("Month", "datavalue", "Year")]
cfil_tss <- cfil_tss[ , c("Month", "datavalue", "year")]
ufil_chla <- ulb_chla[ , c("Month", "datavalue", "Year")]
ufil_n <- ulb_n[ , c("Month", "datavalue", "Year")]
ufil_p <- ulb_p[ , c("Month", "datavalue", "Year")]
ufil_sal <- ulb_sal[ , c("Month", "datavalue", "Year")]
ufil_temp <- ulb_temp[ , c("Month", "datavalue", "Year")]
#Insert month abv. for month number
cfil_chla$MoAb <- mymonths[ cfil_chla$Month ]
cfil_n$MoAb <- mymonths[ cfil_n$Month ]
cfil_p$MoAb <- mymonths[ cfil_p$Month ]
cfil_sal$MoAb <- mymonths[ cfil_sal$Month ]
cfil_si$MoAb <- mymonths[ cfil_si$Month ]
cfil_temp$MoAb <- mymonths[ cfil_temp$Month ]
cfil_tss$MoAb <- mymonths[ cfil_tss$Month ]
ufil_chla$MoAb <- mymonths[ ufil_chla$Month ]
ufil_n$MoAb <- mymonths[ ufil_n$Month ]
ufil_p$MoAb <- mymonths[ ufil_p$Month ]
ufil_sal$MoAb <- mymonths[ ufil_sal$Month ]
#Convert month number to month 3 letter abbreviation
mymonths <- c("Jan","Feb","Mar",
"Apr","May","Jun",
"Jul","Aug","Sep",
"Oct","Nov","Dec")
#Insert month abv. for month number
cfil_chla$MoAb <- mymonths[ cfil_chla$Month ]
cfil_n$MoAb <- mymonths[ cfil_n$Month ]
cfil_p$MoAb <- mymonths[ cfil_p$Month ]
cfil_sal$MoAb <- mymonths[ cfil_sal$Month ]
cfil_si$MoAb <- mymonths[ cfil_si$Month ]
cfil_temp$MoAb <- mymonths[ cfil_temp$Month ]
cfil_tss$MoAb <- mymonths[ cfil_tss$Month ]
ufil_chla$MoAb <- mymonths[ ufil_chla$Month ]
ufil_n$MoAb <- mymonths[ ufil_n$Month ]
ufil_p$MoAb <- mymonths[ ufil_p$Month ]
ufil_sal$MoAb <- mymonths[ ufil_sal$Month ]
ufil_temp$MoAb <- mymonths[ ufil_temp$Month ]
#Concentrate month abv. and year with "-"
cfil_chla$MY <- paste(cfil_chla$MoAb, "-", cfil_chla$year)
cfil_n$MY <- paste(cfil_n$MoAb, "-", cfil_n$year)
cfil_p$MY <- paste(cfil_p$MoAb, "-", cfil_p$year)
cfil_sal$MY <- paste(cfil_sal$MoAb, "-", cfil_sal$Year)
cfil_si$MY <- paste(cfil_si$MoAb, "-", cfil_si$year)
cfil_temp$MY <- paste(cfil_temp$MoAb, "-", cfil_temp$Year)
cfil_tss$MY <- paste(cfil_tss$MoAb, "-", cfil_tss$year)
ufil_chla$MY <- paste(ufil_chla$MoAb, "-", ufil_chla$Year)
ufil_n$MY <- paste(ufil_n$MoAb, "-", ufil_n$Year)
ufil_p$MY <- paste(ufil_p$MoAb, "-", ufil_p$Year)
ufil_sal$MY <- paste(ufil_sal$MoAb, "-", ufil_sal$Year)
ufil_temp$MY <- paste(ufil_temp$MoAb, "-", ufil_temp$Year)
#Combining chlorophyll a dataframes
cavg_chla <- cfil_chla %>%
group_by(fct_inorder(MY)) %>%
summarize_at(c("datavalue"), mean, na.rm = TRUE)
uavg_chla <- ufil_chla %>%
group_by(fct_inorder(MY)) %>%
summarize_at(c("datavalue"), mean, na.rm = TRUE)
colnames(cavg_chla)<- c("fct_inorder(MY)", "chla")
colnames(uavg_chla)<- c("fct_inorder(MY)", "chla")
chla <- full_join(cavg_chla, uavg_chla, by = c('fct_inorder(MY)'))
chla <- chla %>% mutate(chla = coalesce(chla.x,chla.y)) %>%
select(`fct_inorder(MY)`, chla)
#Combining nitrogen dataframes
cavg_n <- cfil_n %>%
group_by(fct_inorder(MY)) %>%
summarize_at(c("datavalue"), mean, na.rm = TRUE)
uavg_n <- ufil_n %>%
group_by(fct_inorder(MY)) %>%
summarize_at(c("datavalue"), mean, na.rm = TRUE)
colnames(cavg_n)<- c("fct_inorder(MY)", "nitrogen")
colnames(uavg_n)<- c("fct_inorder(MY)", "nitrogen")
nitrogen <- full_join(cavg_n, uavg_n, by = c('fct_inorder(MY)'))
nitrogen <- nitrogen %>% mutate(nitrogen = coalesce(nitrogen.x,nitrogen.y)) %>%
select(`fct_inorder(MY)`, nitrogen)
colnames(cavg_chla)<- c("fct_inorder.MY.", "chla")
colnames(uavg_chla)<- c("fct_inorder.MY.", "chla")
chla <- full_join(cavg_chla, uavg_chla, by = c('fct_inorder.MY.'))
chla <- chla %>% mutate(chla = coalesce(chla.x,chla.y)) %>%
select(`fct_inorder.MY.`, chla)
View(chla)
#Combining nitrogen dataframes
cavg_n <- cfil_n %>%
group_by(fct_inorder(MY)) %>%
summarize_at(c("datavalue"), mean, na.rm = TRUE)
uavg_n <- ufil_n %>%
group_by(fct_inorder(MY)) %>%
summarize_at(c("datavalue"), mean, na.rm = TRUE)
colnames(cavg_n)<- c("fct_inorder.MY.", "nitrogen")
colnames(uavg_n)<- c("fct_inorder.MY.", "nitrogen")
nitrogen <- full_join(cavg_n, uavg_n, by = c('fct_inorder.MY.'))
nitrogen <- nitrogen %>% mutate(nitrogen = coalesce(nitrogen.x,nitrogen.y)) %>%
select(`fct_inorder.MY.`, nitrogen)
View(nitrogen)
#Combining phosphorus dataframes
cavg_p <- cfil_p %>%
group_by(fct_inorder(MY)) %>%
summarize_at(c("datavalue"), mean, na.rm = TRUE)
uavg_p <- ufil_p %>%
group_by(fct_inorder(MY)) %>%
summarize_at(c("datavalue"), mean, na.rm = TRUE)
colnames(cavg_p)<- c("fct_inorder.MY.", "phosphorus")
colnames(uavg_p)<- c("fct_inorder.MY.", "phosphorus")
phosphorus <- full_join(cavg_p, uavg_p, by = c('fct_inorder.MY.'))
phosphorus <- phosphorus %>% mutate(phosphorus = coalesce(phosphorus.x,phosphorus.y)) %>%
select(`fct_inorder.MY.`, phosphorus)
View(nitrogen)
View(phosphorus)
#Combining salinity dataframes
cavg_sal <- cfil_sal %>%
group_by(fct_inorder(MY)) %>%
summarize_at(c("datavalue"), mean, na.rm = TRUE)
uavg_sal <- ufil_sal %>%
group_by(fct_inorder(MY)) %>%
summarize_at(c("datavalue"), mean, na.rm = TRUE)
colnames(cavg_sal)<- c("fct_inorder.MY.", "salinity")
colnames(uavg_sal)<- c("fct_inorder.MY.", "salinity")
salinity <- full_join(cavg_sal, uavg_sal, by = c('fct_inorder.MY.'))
salinity <- salinity %>% mutate(salinity = coalesce(salinity.x,salinity.y)) %>%
select(`fct_inorder.MY.`, salinity)
View(salinity)
#Combining temperature dataframes
cavg_temp <- cfil_temp %>%
group_by(fct_inorder(MY)) %>%
summarize_at(c("datavalue"), mean, na.rm = TRUE)
uavg_temp <- ufil_temp %>%
group_by(fct_inorder(MY)) %>%
summarize_at(c("datavalue"), mean, na.rm = TRUE)
colnames(cavg_temp)<- c("fct_inorder.MY.", "temperature")
colnames(uavg_temp)<- c("fct_inorder.MY.", "temperature")
temperature <- full_join(cavg_temp, uavg_temp, by = c('fct_inorder.MY.'))
temperature <- temperature %>% mutate(temperature = coalesce(temperature.x,temperature.y)) %>%
select(`fct_inorder.MY.`, temperature)
View(temperature)
#averaging silica and tss
silica <- cfil_si %>%
group_by(fct_inorder(MY)) %>%
summarize_at(c("datavalue"), mean, na.rm = TRUE)
colnames(silica)<- c("fct_inorder.MY.", "silica")
View(silica)
tss <- cfil_tss %>%
group_by(fct_inorder(MY)) %>%
summarize_at(c("datavalue"), mean, na.rm = TRUE)
colnames(tss)<- c("fct_inorder.MY.", "tss")
View(tss)
#Read in new csv files and nutrient data
cmlnut <- read.csv("CML_Nut.csv" , stringsAsFactors = TRUE)
#combing nutrient dataframes with master dataframes
cmlnut <- full_join(cmlnut, chla, by = c('fct_inorder.MY.'))
View(cmlnut)
cmlnut <- full_join(cmlnut, nitrogen, by = c('fct_inorder.MY.'))
cmlnut <- full_join(cmlnut, phosphorus, by = c('fct_inorder.MY.'))
cmlnut <- full_join(cmlnut, salinity, by = c('fct_inorder.MY.'))
cmlnut <- full_join(cmlnut, temperature, by = c('fct_inorder.MY.'))
cmlnut <- full_join(cmlnut, silica, by = c('fct_inorder.MY.'))
cmlnut <- full_join(cmlnut, tss, by = c('fct_inorder.MY.'))
#Write completed nutrient csv file
write.csv(cmlnut,'CML_Nut.csv', row.names = FALSE)
